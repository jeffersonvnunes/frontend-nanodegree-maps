var Point=function(t){var e=this;e.title=ko.observable(t.title),e.type=ko.observable(t.type),e.lat=ko.observable(t.lat),e.lng=ko.observable(t.lng),e.clicked=ko.observable(!1),e.tips=t.tips,e.id=t.id,e.position=function(){return{lat:e.lat(),lng:e.lng()}}};
var keyGoogleAPI="AIzaSyABgY0eLDVGdMpp0fmL5jW_z0_rk66bG6M",clientIDFoursquare="MDTUYEHIZ1EGDGKCKAPMBQHQZPD1K31MFEPVEH4FL5HHAJ1Y",keyFoursquare="QL3HFGFTNX02NAOD3T00WSRBMKREGDZDHJECRPKG2KAXCL2V",ViewModel=function(){var e,i=this;i.pointList=ko.observableArray([]),i.hasItem=ko.observable(!1),i.initPointlist=function(t){if(i.map){var n;(e=new google.maps.InfoWindow).addListener("closeclick",function(){e.marker=null}),t.forEach(function(t){(n=new Point(t)).show=!0,n.marker=new google.maps.Marker({position:n.position(),title:n.title(),animation:google.maps.Animation.DROP}),n.highlightMarker=(o=n,function(){if(!i.clickedPoint||i.clickedPoint.id!==o.id){i.clickedPoint&&(i.clickedPoint.clicked(!1),i.clickedPoint.marker.setIcon(null),i.clickedPoint.marker.setAnimation(null)),o.clicked(!0),o.marker.setIcon("img/green-dot.png"),o.marker.setAnimation(google.maps.Animation.BOUNCE),i.clickedPoint=o,e.marker=o.marker;for(var t='<div style="max-height: 100vh;"> <h3>'+o.marker.title+'</h3> <h4>Tips</h4> <ul class="list-unstyled components">',n=0;n<o.tips.length;n++)t=t+"<li>"+o.tips[n].text+"</li>";t+="</ui></div>",e.setContent(t),e.open(i.map,o.marker)}});var o;n.marker.addListener("click",n.highlightMarker),i.pointList.push(n)})}},i.currentFilter=ko.observable();var t=ko.observableArray([]);i.activePointList=ko.computed(function(){var n=i.pointList(),o=i.currentFilter();void 0!==o&&(o.length>2||0===o.length)&&(i.clickedPoint&&(i.clickedPoint.clicked(!1),i.clickedPoint.marker.setIcon(null),i.clickedPoint.marker.setAnimation(null),e.close(),e.marker=null),n.forEach(function(e){e.show=0===o.length||e.title().toUpperCase().search(o.toUpperCase())>=0})),t.removeAll();for(var r=0;r<n.length;r++)n[r].marker.setMap(null),n[r].show&&(n[r].marker.setMap(i.map),t.push(n[r]));return i.hasItem(t().length>0),t()},i)};